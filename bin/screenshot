#!/bin/bash

image_path=/tmp/screenshot.png
cp $image_path $image_path.old

case $1 in
selection)
        maim --select --quality 10 $image_path
        ;;
full)
        maim --quality 10 $image_path
        ;;
*)
        notify-send "Screenshot: unknown argument given"
        ;;
esac

# TODO: notify-send action that shows image on right click(with kitty icat)
# TODO: make sure image displayed in notification does not look distorted if it is large

# prevent notification and clipboard copying if a screenshot hasn't been taken
if [ -f "$image_path" ] && ! cmp -s "$image_path" "$image_path.old"; then
        xclip -selection clipboard -t image/png -i $image_path
        notify-send --icon $image_path "Screenshot taken"
fi
