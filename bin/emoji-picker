#!/bin/sh

if [ ! $(command -v dmenu) ] || [ ! $(command -v xclip) ]; then
  echo "ensure dmenu and xclip are installed" 1>&2
  exit
fi

# NOTE: make sure that you have an emoji font patched into dmenu or fonts will
# display as tofu

# Give dmenu list of all unicode characters.
# Shows the selected character in notification daemon if running.
# Character is copied to system clipboard using xclip.

emoji_file=$HOME/.local/share/emojis.json

# TODO: use 5th keyword or last keyword
emoji=$(jq -r ' .[] | "\(.characters) \(.en_tts_description)"' "$emoji_file" \
  | tr '[:upper:]' '[:lower:]' \
  | dmenu \
  | awk '{print $1}' \
  | tr -d '\n')


if [ ! "$emoji" = "" ]; then
  echo "$emoji" | xclip -selection clipboard
  notify-send "emoji: $emoji copied"
fi
